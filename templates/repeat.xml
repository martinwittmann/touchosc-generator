{#- The item dimensions will be the same. No need to calculate this in the loop. -#}
{%- set item = component.component -%}
{%- set item_width = item.width|float -%}
{%- if item.width[-1] == '%' -%}
  {#- Calculate each repeated item's width by its parent's width. -#}
  {%- set item_width = (item.width[:-1]|float / 100) * component.width|float -%}
{%- endif -%}

{%- set item_height = component.component.height|float -%}
{%- if item.height[-1] == '%' -%}
  {#- Calculate each repeated item's height by its parent's height. -#}
  {%- set item_height = (item.height[:-1]|float / 100) * component.height|float -%}
{%- endif -%}

{%- for index in range(component.count|int) -%}
  {%- set item = component.component.copy() -%}
  {%- set column = (index % component.columns)|int -%}
  {%- set row = (index / component.columns)|round(0, 'floor')|int -%}
  {%- set _dummy = item.update({
    'x': component.x|int + (column * item_width),
    'y': component.y|int + (row * item_height),
  }) -%}
  {{ render(item, component, index=index, column=column, row=row) }}
{%- endfor -%}
